{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adnan%20Tariq/Desktop/Work%20Project/new-chat-app/frontend/src/app/login/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { AuthContext } from \"@/contexts/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst Login = () => {\r\n  const [isLogin, setIsLogin] = React.useState(true);\r\n  const { login } = useContext(AuthContext);\r\n  const router = useRouter();\r\n\r\n  // Validation Schemas\r\n  const RegisterValidationSchema = Yup.object({\r\n    username: Yup.string()\r\n      .min(3, \"Username must be at least 3 characters\")\r\n      .required(\"Username is required\"),\r\n    email: Yup.string()\r\n      .email(\"Invalid email format\")\r\n      .required(\"Email is required\"),\r\n    password: Yup.string()\r\n      .min(6, \"Password must be at least 6 characters\")\r\n      .required(\"Password is required\"),\r\n    terms: Yup.boolean()\r\n      .oneOf([true], \"You must accept terms and policies\")\r\n      .required(\"You must accept terms and policies\"),\r\n  });\r\n\r\n  const LoginValidationSchema = Yup.object({\r\n    email: Yup.string()\r\n      .email(\"Invalid email format\")\r\n      .required(\"Email is required\"),\r\n    password: Yup.string().required(\"Password is required\"),\r\n  });\r\n\r\n  // Formik Setup\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      terms: false,\r\n    },\r\n    validationSchema: isLogin\r\n      ? LoginValidationSchema\r\n      : RegisterValidationSchema,\r\n    onSubmit: async (values) => {\r\n      try {\r\n        if (isLogin) {\r\n          await login(\"login\", {\r\n            email: values.email,\r\n            password: values.password,\r\n          });\r\n        } else {\r\n          await login(\"signup\", {\r\n            fullName: values.username,\r\n            email: values.email,\r\n            password: values.password,\r\n            terms: values.terms,\r\n          });\r\n        }\r\n\r\n        router.push(\"/\"); // Redirect after login/register\r\n      } catch (error) {\r\n        console.error(\"Login/Register Error:\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        minHeight: \"100vh\",\r\n        bgcolor: \"background.default\",\r\n        gap: 4,\r\n        maxWidth: \"1400px\",\r\n        mx: \"auto\",\r\n      }}\r\n    >\r\n      <Box flex={1} sx={{ display: { xs: \"none\", md: \"block\" } }}>\r\n        <Box\r\n          component=\"img\"\r\n          src=\"/logo_big.svg\"\r\n          alt=\"Logo\"\r\n          sx={{\r\n            display: \"block\",\r\n            mx: \"auto\",\r\n            mb: 4,\r\n            width: 300,\r\n          }}\r\n        />\r\n      </Box>\r\n\r\n      <Box flex={1}>\r\n        <Paper\r\n          elevation={3}\r\n          sx={{\r\n            p: 4,\r\n            width: { xs: \"90%\", sm: \"100%\" },\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            gap: 2,\r\n            borderRadius: 3,\r\n            mx: \"auto\",\r\n          }}\r\n        >\r\n          <Typography variant=\"h5\" textAlign=\"center\" fontWeight={600}>\r\n            {isLogin ? \"Login\" : \"Create Account\"}\r\n          </Typography>\r\n\r\n          {/* Username only in Register */}\r\n          {!isLogin && (\r\n            <TextField\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              value={formik.values.username}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.username && Boolean(formik.errors.username)}\r\n              helperText={formik.touched.username && formik.errors.username}\r\n            />\r\n          )}\r\n\r\n          {/* Email */}\r\n          <TextField\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            value={formik.values.email}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n            error={formik.touched.email && Boolean(formik.errors.email)}\r\n            helperText={formik.touched.email && formik.errors.email}\r\n          />\r\n\r\n          {/* Password */}\r\n          <TextField\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            value={formik.values.password}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n            error={formik.touched.password && Boolean(formik.errors.password)}\r\n            helperText={formik.touched.password && formik.errors.password}\r\n          />\r\n\r\n          {/* Checkbox Register only */}\r\n          {!isLogin && (\r\n            <>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    name=\"terms\"\r\n                    color=\"primary\"\r\n                    checked={formik.values.terms}\r\n                    onChange={formik.handleChange}\r\n                  />\r\n                }\r\n                label={\r\n                  <Typography variant=\"body2\">\r\n                    I agree to the{\" \"}\r\n                    <Typography\r\n                      component=\"span\"\r\n                      color=\"primary\"\r\n                      sx={{ textDecoration: \"underline\", cursor: \"pointer\" }}\r\n                    >\r\n                      Terms and Policies\r\n                    </Typography>\r\n                  </Typography>\r\n                }\r\n              />\r\n              {formik.touched.terms && formik.errors.terms && (\r\n                <Typography color=\"error\" variant=\"caption\">\r\n                  {formik.errors.terms}\r\n                </Typography>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            fullWidth\r\n            sx={{ mt: 1, borderRadius: 10, py: 1 }}\r\n            onClick={formik.handleSubmit} // Fixed\r\n          >\r\n            {isLogin ? \"Login\" : \"Register\"}\r\n          </Button>\r\n\r\n          {/* Toggle Mode */}\r\n          <Typography variant=\"body2\" textAlign=\"center\" mt={1}>\r\n            {isLogin ? \"Don't have an account?\" : \"Already have an account?\"}{\" \"}\r\n            <Typography\r\n              component=\"span\"\r\n              color=\"primary\"\r\n              sx={{ cursor: \"pointer\", fontWeight: 500 }}\r\n              onClick={() => setIsLogin(!isLogin)}\r\n            >\r\n              {isLogin ? \"Register\" : \"Login here\"}\r\n            </Typography>\r\n          </Typography>\r\n        </Paper>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}